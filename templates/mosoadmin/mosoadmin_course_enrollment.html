<%inherit file="../main.html" />
<%!
    from django.core.urlresolvers import reverse
    from django.utils.translation import ugettext as _
    from django.utils.timezone import utc as UTC
    from util.date_utils import get_time_display, DEFAULT_DATE_TIME_FORMAT
    from django.conf import settings
%>
<%namespace name='static' file='../static_content.html'/>

<%block name="headextra">
  <%static:css group='style-course'/>
  <script type="text/javascript" src="${static.url('js/vendor/flot/jquery.flot.js')}"></script>
  <script type="text/javascript" src="${static.url('js/vendor/flot/jquery.flot.axislabels.js')}"></script>
</%block>
<style type="text/css">
a.active-section {
	color: #551A8B;
}
.sysadmin-dashboard-content h2 a {
	margin-right: 1.2em;
}
table.stat_table {
	font-family: verdana,arial,sans-serif;
	font-size:11px;
	color:#333333;
	border-width: 1px;
	border-color: #666666;
	border-collapse: collapse;
}
table.stat_table th {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #dedede;
}
table.stat_table td {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #ffffff;
}
.import-log {
    display: none;
}

.pagination, .page-status {
    text-align: center;
    padding: 12px 0 12px 0;
}

.pagination .previous-page {
    padding-right: 10px;
}

.pagination .next-page {
    padding-left: 10px;
}

a.selectedmode { background-color: yellow; }

textarea {
  height: 200px;
}


</style>

<section class="container">
  <div class="sysadmin-dashboard-wrapper">

    <section class="sysadmin-dashboard-content" style="margin-left:10pt;margin-top:10pt;margin-right:10pt;margin-bottom:20pt">
      <h1>${_('Sysadmin Dashboard')}</h1>
      <hr />
      <h2 class="instructor-nav">
        <a href="${reverse('createuser')}">创建用户</a>
        <a href="${reverse('mosoadmin_courses')}">选课</a>
        <a href="${reverse('manageusers')}">管理用户</a>
      </h2>
      <hr />

      <form name="action" method="POST">

        <input type="hidden" name="csrfmiddlewaretoken" value="${ csrf_token }" />

        <ul class="list-input">
           <li class="field text">
               <p id="message">结果提示：<br>${msg}</p>
           </li>
            <br>
           <li class="field text">
            <label for="course_id">请填入下表中课程对应的ID</label>
            <input type="text" name="course_id" size=40 />
          </li>

          <li class="field text" style="padding-bottom: 1.2em">
            <label for="identifiers">输入电子邮箱地址与／或 用户名，以逗号分割或重启一行。 对该类问题您不会受到提示邮件，因此请仔细检查，确保拼写无误。</label>
              <textarea rows="6" cols="50" type="text" name="identifiers"></textarea>
          </li>

          <li class="field text" style="padding-bottom: 1.2em">
            <input type="hidden" id="is_course_white_label" value="False">
            <label for="auto-enroll">
                <p>
                    如果勾选了该选项，即使未在平台注册的用户也会自动选修本课程。
                    <br>
                    如果没有勾选该选项，未在平台注册的用户不能选课。当然，一旦用户注册后，就随时可以选课。
                </p>
            </label>
             <input type="checkbox" name="auto_enroll" id="auto_enroll" value="true"  aria-describedby="heading-batch-enrollment">
          </li>

          <li class="field text" style="padding-bottom: 1.2em">
            <label for="email-students">
                <p>如果勾选该选项，用户将受到一封通知邮件。</p>
            </label>
             <input type="checkbox" name="email_students" id="email_students" value="true" aria-describedby="heading-batch-enrollment" >
          </li>
        </ul>

        <div class="form-actions">
          <p>
            <button type="submit" name="action" value="enroll">选课</button>
              <button type="submit" name="action" value="unenroll">弃选</button>
          </p>
        </div>

      </form>
        %if datatable:
            <br/>
            <br/>
            <p>
              <hr width="100%">
              <h2>${datatable['title']}</h2>
              <table class="stat_table">
                <tr>
            %for hname in datatable['header']:
              <th>${hname}</th>
            %endfor
            </tr>
                %for row in datatable['data']:
                  <tr>
                %for value in row:
                  <td>${value}</td>
                %endfor
              </tr>
                %endfor
              </table>
            </p>
        %endif
    </section>
  </div>
</section>

<%block name="js_extra">
    <script type="text/javascript">
            window.onload = function(){
                $("#progress_add").submit(function(e) {
                    e.preventDefault();
                    var note_content = $("#note_content").val();
                    var csrftoken = Cookies.get('csrftoken');
                    progress_add(note_content,{{ id }},csrftoken);
                });
            }
    </script>
</%block>
